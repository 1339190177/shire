---
when: "xxx"
variables:
  "testTemplate": /\(.*\).java/ {
    case "$1" {
      "Controller" { cat(".shire/templates/ControllerTest.java") }
      "Service" { cat(".shire/templates/ServiceTest.java") }
      default  { cat(".shire/templates/DefaultTest.java") }
    }
  }
onStreaming: { /* functions */ }
onStreamingEnd: { parseCode("json") | verifyCode("json") | runCode("json") }
afterStreaming: {
    flags {
      "variable-sucesss" { $selection.length > 1 }
      "jsonpath-success" { jsonpath("$.phoneNumbers[:1].type") }
      "fail" { $content.contains("error") && $content.regex("exception") }
    }
    case flags {
      "variable-sucesss" { done }
      "jsonpath-success" { task() }
      "fail" { task() }
    }
  }
---

nextAction:

- //bookstore/book[price>35]
- $.phoneNumbers[:1].type
- Regex

onStreamingDone:

- Array of processor
- Object flow