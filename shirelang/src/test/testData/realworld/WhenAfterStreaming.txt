ShireFile
  ShireFrontMatterHeaderImpl(FRONT_MATTER_HEADER)
    PsiElement(ShireTokenType.FRONTMATTER_START)('---')
    PsiElement(ShireTokenType.NEWLINE)('\n')
    ShireFrontMatterEntriesImpl(FRONT_MATTER_ENTRIES)
      ShireFrontMatterEntryImpl(FRONT_MATTER_ENTRY)
        ShireFrontMatterKeyImpl(FRONT_MATTER_KEY)
          ShireFrontMatterIdImpl(FRONT_MATTER_ID)
            PsiElement(ShireTokenType.IDENTIFIER)('interaction')
        PsiElement(ShireTokenType.COLON)(':')
        PsiWhiteSpace(' ')
        ShireFrontMatterValueImpl(FRONT_MATTER_VALUE)
          PsiElement(ShireTokenType.IDENTIFIER)('AppendCursor')
        PsiElement(ShireTokenType.NEWLINE)('\n')
      ShireFrontMatterEntryImpl(FRONT_MATTER_ENTRY)
        ShireLifecycleIdImpl(LIFECYCLE_ID)
          PsiElement(ShireTokenType.onStreamingEnd)('onStreamingEnd')
        PsiElement(ShireTokenType.COLON)(':')
        PsiWhiteSpace(' ')
        ShireFunctionStatementImpl(FUNCTION_STATEMENT)
          PsiElement(ShireTokenType.{)('{')
          PsiWhiteSpace(' ')
          ShireFunctionBodyImpl(FUNCTION_BODY)
            ShireActionBodyImpl(ACTION_BODY)
              ShireActionExprImpl(ACTION_EXPR)
                ShireFuncCallImpl(FUNC_CALL)
                  ShireFuncNameImpl(FUNC_NAME)
                    PsiElement(ShireTokenType.IDENTIFIER)('parseCode')
                  PsiElement(ShireTokenType.()('(')
                  ShirePipelineArgsImpl(PIPELINE_ARGS)
                    ShirePipelineArgImpl(PIPELINE_ARG)
                      PsiElement(ShireTokenType.QUOTE_STRING)('"json"')
                  PsiElement(ShireTokenType.))(')')
              PsiWhiteSpace(' ')
              PsiElement(ShireTokenType.|)('|')
              PsiWhiteSpace(' ')
              ShireActionExprImpl(ACTION_EXPR)
                ShireFuncCallImpl(FUNC_CALL)
                  ShireFuncNameImpl(FUNC_NAME)
                    PsiElement(ShireTokenType.IDENTIFIER)('verifyCode')
                  PsiElement(ShireTokenType.()('(')
                  ShirePipelineArgsImpl(PIPELINE_ARGS)
                    ShirePipelineArgImpl(PIPELINE_ARG)
                      PsiElement(ShireTokenType.QUOTE_STRING)('"json"')
                  PsiElement(ShireTokenType.))(')')
              PsiWhiteSpace(' ')
              PsiElement(ShireTokenType.|)('|')
              PsiWhiteSpace(' ')
              ShireActionExprImpl(ACTION_EXPR)
                ShireFuncCallImpl(FUNC_CALL)
                  ShireFuncNameImpl(FUNC_NAME)
                    PsiElement(ShireTokenType.IDENTIFIER)('runCode')
                  PsiElement(ShireTokenType.()('(')
                  ShirePipelineArgsImpl(PIPELINE_ARGS)
                    ShirePipelineArgImpl(PIPELINE_ARG)
                      PsiElement(ShireTokenType.QUOTE_STRING)('"json"')
                  PsiElement(ShireTokenType.))(')')
          PsiWhiteSpace(' ')
          PsiElement(ShireTokenType.})('}')
          PsiElement(ShireTokenType.NEWLINE)('\n')
      ShireFrontMatterEntryImpl(FRONT_MATTER_ENTRY)
        ShireLifecycleIdImpl(LIFECYCLE_ID)
          PsiElement(ShireTokenType.when)('when')
        PsiElement(ShireTokenType.COLON)(':')
        PsiWhiteSpace(' ')
        ShireLiteralExprImpl(LITERAL_EXPR)
          PsiElement(ShireTokenType.QUOTE_STRING)('"$selection.length == 1 && $selection.first() == 'file'"')
        PsiElement(ShireTokenType.NEWLINE)('\n')
    PsiElement(ShireTokenType.FRONTMATTER_END)('---')
  PsiElement(ShireTokenType.NEWLINE)('\n')
  PsiElement(ShireTokenType.NEWLINE)('\n')
  PsiElement(ShireTokenType.TEXT_SEGMENT)('hi')
  PsiElement(ShireTokenType.NEWLINE)('\n')
  PsiElement(ShireTokenType.NEWLINE)('\n')
  PsiElement(ShireTokenType.TEXT_SEGMENT)('Hello! How can I assist you today?')